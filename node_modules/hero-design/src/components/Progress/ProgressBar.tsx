import React, { ReactElement } from 'react';
import Icon from '../Icon';

import { CommonProps } from '../common';
import {
  Background,
  Info,
  ProgressPercentage,
  Wrapper,
} from './StyledProgressBar';

export interface ProgressBarProps extends CommonProps {
  intent: 'primary' | 'danger' | 'success';
  size: 'small' | 'medium';
  value: number;
  withInfo: boolean;
}

const ProgressBar = ({
  intent,
  size,
  withInfo,
  value,
  id,
  className,
  style,
  'data-test-id': dataTestId,
}: ProgressBarProps): ReactElement => {
  return (
    <Wrapper
      themeSize={size}
      id={id}
      className={className}
      style={style}
      data-test-id={dataTestId}
    >
      <Background themeSize={size} themeFullWidth={withInfo === false}>
        <ProgressPercentage
          themeSize={size}
          themeIntent={intent}
          themeValue={value}
        />
      </Background>
      {withInfo === true && (
        <Info>
          {intent === 'danger' && <Icon icon="circle-cancel" intent={intent} />}
          {intent === 'success' && <Icon icon="circle-ok" intent={intent} />}
          {intent === 'primary' && `${value}%`}
        </Info>
      )}
    </Wrapper>
  );
};

export default ProgressBar;
